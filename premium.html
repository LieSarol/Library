<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Premium Tutorials | Nexix</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
    <style>
      body {
        font-family: 'Inter', sans-serif;
        background: linear-gradient(to bottom right, #0f172a, #111827);
      }
      .glass {
        backdrop-filter: blur(20px);
        background-color: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.1);
      }

      /* ðŸ‘‡ FIXED HEIGHT + SCROLLABLE DROPDOWN */
      #dropdownMenu {
        max-height: 250px;
        overflow-y: auto;
      }

      #dropdownMenu::-webkit-scrollbar {
        width: 6px;
      }

      #dropdownMenu::-webkit-scrollbar-thumb {
        background-color: rgba(59, 130, 246, 0.3); /* blue-500/30 */
        border-radius: 4px;
      }

      #dropdownMenu::-webkit-scrollbar-track {
        background: transparent;
      }
    </style>
  </head>
  <body class="text-white px-6 py-12">
    <div class="max-w-4xl mx-auto space-y-12">
      <!-- Title -->
      <div class="text-center">
        <h1 class="text-4xl md:text-5xl font-extrabold text-blue-400 mb-2">ðŸ‘‘ Premium Tutorials</h1>
        <p class="text-gray-300 text-sm">Carefully crafted deep dives. Choose your niche and explore.</p>
      </div>

      <!-- Custom Dropdown -->
      <div class="relative max-w-xs mx-auto">
        <button
          id="dropdownButton"
          class="glass w-full px-5 py-3 rounded-lg text-left font-medium text-white flex items-center justify-between hover:bg-blue-500/10 transition"
        >
          <span id="selectedNiche">life</span>
          <i class="fas fa-chevron-down text-blue-300"></i>
        </button>

        <ul
          id="dropdownMenu"
          class="glass absolute z-50 w-full mt-2 rounded-lg shadow-xl hidden"
        >
          <!-- JS adds options -->
        </ul>
      </div>

      <!-- List of Tutorials -->
      <div id="questionList" class="grid md:grid-cols-2 gap-6"></div>
    </div>

    <script>
      const dropdownBtn = document.getElementById("dropdownButton");
      const dropdownMenu = document.getElementById("dropdownMenu");
      const selectedNiche = document.getElementById("selectedNiche");
      const questionList = document.getElementById("questionList");

      const dropdownNiches = [
        "Science",
        "Mathematics",
        "Philosophy",
        "Psychology",
        "Coding / Programming",
        "Business & Entrepreneurship",
        "Finance & Investing",
        "Marketing",
        "Artificial Intelligence",
        "Health & Nutrition",
        "Self-Improvement",
        "Communication & Writing",
        "Critical Thinking",
        "Leadership",
        "Emotional Intelligence"
      ];

      // Populate dropdown
      dropdownNiches.forEach((niche) => {
        const li = document.createElement("li");
        li.textContent = niche;
        li.className =
          "px-5 py-3 cursor-pointer hover:bg-blue-500/10 text-white text-sm";
        li.onclick = () => {
          selectedNiche.textContent = niche;
          dropdownMenu.classList.add("hidden");
          fetchQuestions(niche);
        };
        dropdownMenu.appendChild(li);
      });

      dropdownBtn.addEventListener("click", () => {
        dropdownMenu.classList.toggle("hidden");
      });

      document.addEventListener("click", (e) => {
        if (!dropdownBtn.contains(e.target)) {
          dropdownMenu.classList.add("hidden");
        }
      });

      async function fetchQuestions(niche) {
  const url = `https://library-of-knowledge.vercel.app/flex/popular?niche=${niche}&limit=5`;
  try {
    const res = await fetch(url);
    const data = await res.json();

    questionList.innerHTML = "";

    data.forEach((item) => {
      const card = document.createElement("div");
      card.className =
        "glass p-5 rounded-xl shadow-md border border-blue-500/20 hover:border-blue-400/40 transition cursor-pointer";

      card.innerHTML = `
        <div class="flex items-start gap-3">
          <i class="fas fa-crown text-blue-400 mt-1"></i>
          <div class="text-white font-medium leading-snug">${item.question}</div>
        </div>
      `;

      // ðŸŽ¯ Detect click and store xata_id
      card.addEventListener("click", () => {
        if (item.xata_id) {
          sessionStorage.setItem("selectedXataId", item.xata_id);
        }
        window.location.href = "/main5.html";
      });

      questionList.appendChild(card);
    });
  } catch (err) {
    questionList.innerHTML = `<p class="text-red-400">Error loading tutorials.</p>`;
  }
          }

      // Load default niche
      fetchQuestions("life");
    </script>
  </body>
</html>
